<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nome da p√°gina</title>
    <link rel="stylesheet" href="assets/css/user.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
</head>

<body>
    <header class="cabecalho">
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <img src="assets/img/Logo.png" alt="Bootstrap" width="80" height="80">
                </a>
                <div class="collapse navbar-collapse" id="navbarToggleExternalContent">
                    <form class="d-flex" role="search">
                        <input id="brpesquisa" class="form-control ms-2 me-2" type="search" placeholder="Search"
                            aria-label="Search">
                        <button class="btn btn-outline-light" type="submit">Search</button>
                    </form>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <ul class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                <i class="fa-solid fa-list"></i>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">Action</a></li>
                                <li><a class="dropdown-item" href="#">Another action</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#">Something else here</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <ul id="itens-lateral">
                    <li class="">
                        <a class="" aria-current="" href="#">
                            <i class="fa-solid fa-sun"></i>
                        </a>
                    </li>
                    <li class="">
                        <a class="" aria-current="" href="#">
                            <div id="circulo-profile">
                                <i class="fa-solid fa-user"></i>
                            </div>
                        </a>
                    </li>
                </ul>
            </div>
            </div>
        </nav>
    </header>

    <!--Coloque aqui o cont√©udo principal da sua p√°gina-->
    <main>
        <aside class="barra-lateral">
            <div class="bl-icones ">
                <ul class="p-1 mt-2 d-flex flex-column">
                    <li><a href="#"><i class="fa-solid fa-house"></i></a></li>
                    <li><a href="infoblocos.html"><i class="fa-solid fa-masks-theater"></i></a></li>
                    <li class="active"><a href="#"><i class="fa-solid fa-circle-user"></i></a></li>
                    <li><a href="#"><i class="fa-solid fa-message"></i></a></li>
                    <li><a href="#"><i class="fa-solid fa-flag"></i></a></li>
                </ul>
            </div>
            
        </aside>
        
            <!--oi apaguem esses paragrafos na hora de fazer-->
            
<main id="usuario-container" style="padding: 20px; background: white; text-align: center; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
  <h2 style="color: crimson; margin-bottom: 20px; text-shadow: 1px 1px 2px rgba(0,0,0,0.1);">Usu√°rio</h2>

  <div style="display: inline-block; background: #f2f2f2; padding: 20px; border-radius: 10px; width: 300px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); transition: transform 0.3s ease, box-shadow 0.3s ease;">
    <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="Foto de perfil" width="100" style="transition: transform 0.3s ease; cursor: pointer;">
    <br><br>
    <form id="form-usuario">
      <input type="hidden" id="id" />

      <div style="margin-bottom: 15px; text-align: left;">
        <label style="display: block; margin-bottom: 5px; color: #555; font-weight: 600;">Nome completo:</label>
        <input type="text" id="nome_completo" class="form-input" />
      </div>

      <div style="margin-bottom: 15px; text-align: left;">
        <label style="display: block; margin-bottom: 5px; color: #555; font-weight: 600;">Login:</label>
        <input type="text" id="login" class="form-input" />
      </div>

      <div style="margin-bottom: 15px; text-align: left;">
        <label style="display: block; margin-bottom: 5px; color: #555; font-weight: 600;">Data de nascimento:</label>
        <input type="date" id="data_nasc" class="form-input" />
      </div>

      <div style="margin-bottom: 15px; text-align: left;">
        <label style="display: block; margin-bottom: 5px; color: #555; font-weight: 600;">Email:</label>
        <input type="email" id="email" class="form-input" />
      </div>

      <div style="margin-bottom: 20px; text-align: left; position: relative;">
        <label style="display: block; margin-bottom: 5px; color: #555; font-weight: 600;">Senha:</label>
        <input type="password" id="senha" class="form-input" />
        <span id="toggle-password" style="position: absolute; right: 10px; top: 30px; cursor: pointer; color: #666;">üëÅÔ∏è</span>
      </div>
 
<button type="submit" class="btn-salvar" style="position: relative; overflow: hidden;">
  <span class="btn-text">Salvar</span>
  <span class="btn-loading" style="display: none;">‚åõ</span>
  <span class="btn-success" style="display: none;">‚úì</span>
</button>

<!-- ‚úÖ Bot√£o Sair agora DENTRO do formul√°rio e da div -->

</form>
</div>
 <!-- Fecha o formul√°rio -->
 <!-- Fecha a div cinza -->
<!-- Bot√£o sair fixo no canto inferior direito -->
<button onclick="sair()" class="btn-sair-fixo">Sair</button>


</main>

<style>
  /* Estilos globais */
  .form-input {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    transition: all 0.3s ease;
    box-sizing: border-box;
  }
  
  .form-input:focus {
    border-color: teal;
    box-shadow: 0 0 0 2px rgba(0, 128, 128, 0.2);
    outline: none;
  }
  
  /* Efeitos hover */
  #usuario-container > div:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.15);
  }
  
  img:hover {
    transform: scale(1.1);
  }
  
  /* Bot√£o Salvar */
  .btn-salvar {
    background-color: teal;
    color: white;
    border: none;
    padding: 10px 24px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
    width: 100%;
  }
  
  .btn-salvar:hover {
    background-color: #006666;
    box-shadow: 0 2px 8px rgba(0, 128, 128, 0.3);
  }
  
  .btn-salvar:active {
    transform: scale(0.98);
  }
  
  /* Bot√£o Sair */
.btn-sair-fixo {
  position: fixed;
  bottom: 30px;
  right: 30px;
  background-color: #d62828;
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 5px;
  font-weight: bold;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  cursor: pointer;
  z-index: 1000;
}

.btn-sair-fixo:hover {
  background-color: #b02121;
}

  
  /* Anima√ß√£o de loading */
  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  
  .btn-loading {
    animation: spin 1s linear infinite;
  }
  
  /* Efeito de senha */
  #toggle-password:hover {
    color: teal;
  }
</style>

<script>
  const usuarioId = 1; // Altere para o ID do usu√°rio logado

  // Carrega os dados do usu√°rio
  function carregarUsuario() {
    const loading = document.querySelector('.btn-loading');
    const success = document.querySelector('.btn-success');
    const btnText = document.querySelector('.btn-text');
    
    btnText.style.display = 'none';
    loading.style.display = 'inline-block';
    
    fetch(`http://localhost:3000/usuarios/${usuarioId}`)
      .then(res => res.json())
      .then(usuario => {
        document.getElementById('id').value = usuario.id;
        document.getElementById('nome_completo').value = usuario.nome_completo;
        document.getElementById('login').value = usuario.login;
        document.getElementById('email').value = usuario.email;
        document.getElementById('data_nasc').value = usuario.data_nasc;
        document.getElementById('senha').value = usuario.senha;
        
        loading.style.display = 'none';
        success.style.display = 'inline-block';
        setTimeout(() => {
          success.style.display = 'none';
          btnText.style.display = 'inline-block';
        }, 1000);
      })
      .catch(error => {
        console.error('Erro ao carregar usu√°rio:', error);
        loading.style.display = 'none';
        btnText.style.display = 'inline-block';
      });
  }

  // Alternar visibilidade da senha
  document.getElementById('toggle-password').addEventListener('click', function() {
    const senhaInput = document.getElementById('senha');
    if (senhaInput.type === 'password') {
      senhaInput.type = 'text';
      this.textContent = 'üëÅÔ∏è‚Äçüó®Ô∏è';
    } else {
      senhaInput.type = 'password';
      this.textContent = 'üëÅÔ∏è';
    }
  });

  // Enviar formul√°rio
  document.getElementById('form-usuario').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const btnSalvar = document.querySelector('.btn-salvar');
    const btnText = btnSalvar.querySelector('.btn-text');
    const loading = btnSalvar.querySelector('.btn-loading');
    const success = btnSalvar.querySelector('.btn-success');
    
    btnText.style.display = 'none';
    loading.style.display = 'inline-block';
    
    const usuarioAtualizado = {
      nome_completo: document.getElementById('nome_completo').value,
      login: document.getElementById('login').value,
      email: document.getElementById('email').value,
      data_nasc: document.getElementById('data_nasc').value,
      senha: document.getElementById('senha').value
    };

    const id = document.getElementById('id').value;

    fetch(`http://localhost:3000/usuarios/${id}`, {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(usuarioAtualizado)
    })
    .then(res => res.json())
    .then(data => {
      loading.style.display = 'none';
      success.style.display = 'inline-block';
      
      setTimeout(() => {
        success.style.display = 'none';
        btnText.style.display = 'inline-block';
      }, 1000);
      
      // Feedback visual
      const formDiv = document.querySelector('#usuario-container > div');
      formDiv.style.boxShadow = '0 0 0 3px rgba(0, 200, 0, 0.3)';
      setTimeout(() => {
        formDiv.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
      }, 1000);
    })
    .catch(error => {
      console.error('Erro ao atualizar usu√°rio:', error);
      loading.style.display = 'none';
      btnText.style.display = 'inline-block';
      
      // Feedback de erro
      const formDiv = document.querySelector('#usuario-container > div');
      formDiv.style.boxShadow = '0 0 0 3px rgba(200, 0, 0, 0.3)';
      setTimeout(() => {
        formDiv.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
      }, 1000);
    });
  });

  // Efeito hover no container principal
  document.querySelector('#usuario-container > div').addEventListener('mouseenter', function() {
    this.style.transform = 'translateY(-5px)';
    this.style.boxShadow = '0 6px 12px rgba(0,0,0,0.15)';
  });
  
  document.querySelector('#usuario-container > div').addEventListener('mouseleave', function() {
    this.style.transform = '';
    this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
  });

  // Carrega os dados quando a p√°gina √© aberta
  document.addEventListener('DOMContentLoaded', carregarUsuario);
</script>
 
   

    <footer class="rodape">
        <div class="footer-content">
            <div class="footer-section">
                <img src="assets/img/Logo.png" alt="Logo" class="logo-footer">     
            </div>
            
            <div class="footer-section">
                <h3>Produto</h3>
                <ul>
                    <li><a href="#">Informa√ß√£o</a></li>
                    <li><a href="#">Recursos</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Companhia</h3>
                <ul>
                    <li><a href="#">Saiba Mais</a></li>
                    <li><a href="#">Contato</a></li>
                </ul>
            </div>
        </div>
        
        <div class="copyright">
            <p>A product of HermesSentry</p>
            <p>¬© 2025 Carna Livre. All rights reserved</p>
        </div>
    </footer>

    <script src="https://kit.fontawesome.com/3fdf209596.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
        crossorigin="anonymous"></script>
</body>

</html>